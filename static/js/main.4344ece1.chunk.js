(this["webpackJsonpbilalshop-frontend"]=this["webpackJsonpbilalshop-frontend"]||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(10),l=a.n(o),r=(a(98),a(14)),i=a(145),u=a(149),s=a(50),d=a(167),m=a(153),f=a(19),p=a.n(f),h=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),f=Object(r.a)(l,2),h=f[0],E=f[1],g=Object(n.useState)(""),b=Object(r.a)(g,2),v=b[0],O=b[1];return c.a.createElement(i.a,{container:!0,justify:"center",alignItems:"center",direction:"row",style:{height:"100vh",backgroundColor:"lightBlue"}},c.a.createElement(i.a,{item:!0,md:4,sm:8,xs:12},c.a.createElement(u.a,{style:{padding:32,margin:16}},c.a.createElement(i.a,{container:!0,spacing:2},c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(s.a,{variant:"h6",color:"error"},v)),c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(d.a,{fullWidth:!0,variant:"outlined",label:"Email",type:"email",onChange:function(e){o(e.target.value)}})),c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(d.a,{fullWidth:!0,variant:"outlined",type:"password",label:"Password",onChange:function(e){E(e.target.value)}})),c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(m.a,{fullWidth:!0,variant:"contained",onClick:function(){O(""),p.a.auth().signInWithEmailAndPassword(a,h).then((function(){})).catch((function(e){O("Invalid User")}))}},"Login"))))))},E=a(156),g=a(63),b=a(154),v=a(155),O=a(33),y=function(e){var t=Object(O.f)();return c.a.createElement(b.a,{button:!0,onClick:function(){t.push(e.link)},selected:e.selected,divider:!0},c.a.createElement(v.a,{primary:e.text}))},j=a(152),x=function(e){return c.a.createElement(j.a,null,e.items.map((function(e,t){return c.a.createElement(y,Object.assign({key:t},e))})))},k=Object(O.g)((function(e){var t=e.history,a=Object(g.a)(e,["history"]),n=[{text:"Products (".concat(a.products,")"),link:"/products",selected:"/products"===t.location.pathname||"/"===t.location.pathname},{text:"Purchases",link:"/purchases",selected:"/purchases"===t.location.pathname},{text:"Sales",link:"/sales",selected:"/sales"===t.location.pathname},{text:"Vendors",link:"/vendors",selected:"/vendors"===t.location.pathname},{text:"Customers",link:"/customers",selected:"/customers"===t.location.pathname},{text:"Employees",link:"/employees",selected:"/employees"===t.location.pathname},{text:"Accounts",link:"/accounts",selected:"/accounts"===t.location.pathname},{text:"Loans",link:"/loans",selected:"/loans"===t.location.pathname},{text:"Expenses",link:"/expenses",selected:"/expenses"===t.location.pathname},{text:"Vendor Payments",link:"/vendorpayments",selected:"/vendorpayments"===t.location.pathname},{text:"Customer Payments",link:"/customerpayments",selected:"/customerpayments"===t.location.pathname},{text:"Invoices",link:"/invoices",selected:"/invoices"===t.location.pathname}];return c.a.createElement(x,{items:n})})),w=a(47),C=a(82),P=a.n(C),S=a(157),A=a(158),M=a(159),F=a(160),I=a(161),L=a(162),W=a(163),D=a(164),B=a(84),N=function(e){var t=Object(B.a)({},e),a=t.loading,n=t.disabled,o=Object(g.a)(t,["loading","disabled"]);return c.a.createElement(m.a,Object.assign({},o,{disabled:a||n,startIcon:a?c.a.createElement(E.a,{style:{color:"white"},size:"1rem"}):""}),e.children)},z=["Name","Average Rate","Quantity","Total","Details","Actions"],K=Object(S.a)({head:{backgroundColor:"#ECEDEF"}}),R=function(e){var t=K();return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,null,c.a.createElement(A.a,null,c.a.createElement(M.a,null,c.a.createElement(F.a,{classes:{root:t.head}},c.a.createElement(I.a,null,z.map((function(e,t){return c.a.createElement(L.a,{key:t},e)})))),c.a.createElement(W.a,null,e.rows.map((function(t,a){return c.a.createElement(I.a,{key:t.id,onClick:function(){console.log("clicked",a)}},c.a.createElement(L.a,null,t.name),c.a.createElement(L.a,null,t.rate),c.a.createElement(L.a,null,t.quantity),c.a.createElement(L.a,null,t.rate*t.quantity),c.a.createElement(L.a,null,t.details),c.a.createElement(L.a,null,c.a.createElement(D.a,{onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(P.a,null))))})))),c.a.createElement(N,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading},"Load More"))))},H=a(150),q={product:{get:function(e,t,a){var n=Object(f.firestore)().collection("products").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(f.firestore)().collection("products").add(e).then((function(e){var n=Object(f.firestore)().collection("counts").doc("LeHK24ewKeGrwFsMbzRE");n.get().then((function(a){var c=a.data();n.update({products:c.products+1}),t(e.id)})).catch((function(){a()}))})).catch((function(){a()}))},delete:function(e,t,a){console.log("product id",e),Object(f.firestore)().collection("products").doc(e).delete().then((function(){console.log("successfully deleted");var e=Object(f.firestore)().collection("counts").doc("LeHK24ewKeGrwFsMbzRE");e.get().then((function(a){var n=a.data();e.update({products:n.products-1}),t&&t(),console.log("successfully updated count")})).catch((function(){console.log("error fetching products count"),a&&a()}))})).catch((function(e){console.log("something went",e)}))}},counts:{get:function(e){Object(f.firestore)().collection("counts").limit(1).onSnapshot((function(t){e(t)}))}}},V=[],G=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],p=Object(n.useState)(!1),h=Object(r.a)(p,2),E=h[0],g=h[1],b=Object(n.useState)(!1),v=Object(r.a)(b,2),O=v[0],y=v[1];return Object(n.useEffect)((function(){y(!0),q.product.get((function(e){V=[];var t=[];e.docs.forEach((function(e){V.push(e);var a=e.data();a.id=e.id,t.push(a)})),f(t),y(!1)}),(function(){y(!1)}))}),[]),{openProductModal:function(){c(!0)},closeProductModal:function(e){c(!1),e&&u(!0)},modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteProduct:function(e){g(!0),q.product.delete(m[e].id,(function(){V.splice(e,1);var t=m.filter((function(t,a){return a!=e}));f(t),g(!1)}),(function(){g(!1)}))},addProduct:function(e){m.push(e),m.sort((function(e,t){return t.createdAt-e.createdAt})),f(m)},loadMoreProducts:function(){y(!0),q.product.get((function(e){var t=[];e.docs.forEach((function(e){V.push(e);var a=e.data();a.id=e.id,t.push(a)})),f((function(e){return e.concat(t)})),y(!1)}),(function(){y(!1)}),V[V.length-1])},deleting:E,loading:O,rows:m}},J=a(170),Q=a(165),T=function(e,t){var a=Object(n.useState)(""),c=Object(r.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),s=u[0],d=u[1],m=Object(n.useState)(!1),f=Object(r.a)(m,2),p=f[0],h=f[1];return{handleClick:function(){if(!p){h(!0);var a=Date.now(),n={name:o,details:s,quantity:0,rate:0,createdAt:a,updatedAt:a};q.product.add(n,(function(a){h(!1),n.id=a,e(n),t(!0)}),(function(){h(!1)}))}},onNameChange:function(e){l(e)},onDetailsChange:function(e){d(e)},loading:p}},U=function(e){var t=e.open,a=e.close,n=e.onAdd,o=T(n,a),l=o.handleClick,r=o.onNameChange,u=o.onDetailsChange,s=o.loading;return c.a.createElement(J.a,{open:t},c.a.createElement(Q.a,null,"Add New Product"),c.a.createElement(i.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(i.a,{container:!0,spacing:2},c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(d.a,{fullWidth:!0,label:"Product Name",onChange:function(e){r(e.target.value)}})),c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(d.a,{fullWidth:!0,label:"Details",multiline:!0,rows:3,onChange:function(e){u(e.target.value)}})))),c.a.createElement(i.a,{item:!0,xs:12},c.a.createElement(i.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(i.a,{item:!0},c.a.createElement(N,{variant:"text",onClick:function(){a(!1)}},"Cancel")),c.a.createElement(i.a,{item:!0},c.a.createElement(N,{onClick:l,loading:s},"Add Product"))))))},X=a(171),Z=a(169),$=function(e){return c.a.createElement(X.a,{open:e.open,autoHideDuration:1e3,onClose:function(t,a){"clickaway"!==a&&e.onClose()},anchorOrigin:{vertical:"top",horizontal:"right"}},c.a.createElement(Z.a,{variant:"filled",severity:e.severity},e.message))},_=function(e){var t=G(),a=t.openProductModal,n=t.closeProductModal,o=t.modalOpen,l=t.showSuccessMessage,r=t.hideSuccessMessage,u=t.deleteProduct,f=t.loadMoreProducts,p=t.addProduct,h=t.deleting,E=t.loading,g=t.rows;return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{container:!0},c.a.createElement(i.a,{item:!0,xs:1}),c.a.createElement(i.a,{item:!0,xs:10},c.a.createElement(s.a,{variant:"h4"},"Products"),c.a.createElement(i.a,{container:!0,alignItems:"center"},c.a.createElement(i.a,{item:!0,xs:6},c.a.createElement(H.a,{fullWidth:!0},c.a.createElement(d.a,{variant:"outlined",placeholder:"Search Products"}))),c.a.createElement(i.a,{item:!0,xs:6},c.a.createElement(i.a,{container:!0,justify:"flex-end"},c.a.createElement(i.a,{item:!0},c.a.createElement(m.a,{variant:"contained",color:"primary",onClick:a},"Add New Product"))))),c.a.createElement(s.a,{variant:"body1"},"Showing ",g.length," out of ",e.numberOfProducts," products"),c.a.createElement(R,{rows:g,onRowDelete:u,deleting:h,onLoadMore:f,allLoaded:g.length===e.numberOfProducts,loading:E}))),c.a.createElement($,{severity:"success",open:l,onClose:r,message:"Product added successfully"}),c.a.createElement(U,{open:o,close:n,"aria-labelledby":"product_modal",onAdd:p}))},Y=function(e){var t=[{path:"/",component:c.a.createElement(_,{numberOfProducts:e.products})},{path:"/products",component:c.a.createElement(_,{numberOfProducts:e.products})},{path:"*",component:c.a.createElement(s.a,{variant:"h3"},"Some Page")}];return c.a.createElement(O.c,null,t.map((function(e,t){return c.a.createElement(O.a,{exact:!0,path:e.path,key:t},e.component)})))},ee=function(){return c.a.createElement(m.a,{fullWidth:!0,variant:"text",color:"primary",onClick:function(){p.a.auth().signOut().then((function(){console.log("succesfully signed out")})).catch((function(e){console.log("error",e)}))}},"Logout")},te=function(){var e=Object(n.useState)(0),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){q.counts.get((function(e){c(e.docs[0].data().products)}))}),[]),{numberOfProducts:a}},ae=function(){var e=te().numberOfProducts;return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{container:!0,style:{height:"100vh",backgroundColor:"#FFFFFF"}},c.a.createElement(w.a,{basename:"/bilalshop"},c.a.createElement(i.a,{item:!0,xs:2},c.a.createElement("div",{style:{padding:16}},c.a.createElement(s.a,{variant:"h5",align:"center"},"Bilal Shop"),c.a.createElement(ee,null)),c.a.createElement(k,{products:e})),c.a.createElement(i.a,{item:!0,xs:10},c.a.createElement(Y,{products:e})))))},ne=function(){var e=Object(n.useState)(!0),t=Object(r.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),i=Object(r.a)(l,2),u=i[0],s=i[1];return Object(n.useEffect)((function(){p.a.auth().onAuthStateChanged((function(e){s(!!e),o(!1)}))}),[]),a?c.a.createElement(E.a,null):u?c.a.createElement(ae,null):c.a.createElement(h,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=a(166),oe=a(83),le=Object(oe.a)({props:{MuiTextField:{variant:"outlined"},MuiButton:{color:"primary",variant:"contained"}}});p.a.initializeApp({apiKey:"AIzaSyAN6y59cHMfZiXomgcBbIVh5p1m0yLQshI",projectId:"bilalshop-b7685"}),l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ce.a,{theme:le},c.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,a){e.exports=a(115)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.4344ece1.chunk.js.map