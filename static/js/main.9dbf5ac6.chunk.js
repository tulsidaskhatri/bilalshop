(this["webpackJsonpbilalshop-frontend"]=this["webpackJsonpbilalshop-frontend"]||[]).push([[0],{122:function(e,t,a){e.exports=a(144)},127:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(15),l=a.n(o),r=(a(127),a(2)),i=a(82),u=a.n(i),s=a(96),d="http://ec2-18-191-136-200.us-east-2.compute.amazonaws.com:7000",m={},f=function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"POST";fetch(d+e,{method:c,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(t)}).then(function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!=t.status){e.next=10;break}if(e.t0=a,!e.t0){e.next=8;break}return e.t1=a,e.next=6,t.json();case 6:e.t2=e.sent,(0,e.t1)(e.t2);case 8:e.next=11;break;case 10:n&&n(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n&&n(e)}))},g=function(){window.location.href="/login"},E=function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];fetch(d+e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return 401!==e.status&&403!==e.status||(n?g():a&&a({status:"Failure"})),e.json()})).then((function(e){t&&t(e)})).catch((function(e){a&&a(e)}))},h={authenticate:function(e,t){E("/user/authenticate",e,t,!1)},user:{login:function(e,t,a,n){f("/user/login",{email:e,password:t},(function(e){localStorage.setItem("token",e.data.accessToken),a(e)}),n)},register:function(e,t,a,n,c){f("/user/register",{name:e,email:t,password:a},n,c)},logout:function(e,t){f("/user/logout",{},e,t,"DELETE")}},product:{list:function(e,t,a,n){E("/product/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},create:function(e,t,a){f("/product/create",e,t,a)},delete:function(e,t,a){f("/product/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/product/update",e,t,a,"PUT")}},account:{list:function(e,t,a,n){E("/account/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},create:function(e,t,a){f("/account/create",e,t,a)},delete:function(e,t,a){f("/account/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/account/update",e,t,a,"PUT")}},city:{list:function(e,t){E("/city/list",e,t,!1)},create:function(e,t,a){f("/city/create",e,t,a)},delete:function(e,t,a){f("/city/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/city/update",e,t,a,"PUT")}},customer:{list:function(e,t,a,n){E("/customer/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},create:function(e,t,a){f("/customer/create",e,t,a)},delete:function(e,t,a){f("/customer/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/customer/update",e,t,a,"PUT")}},vendor:{list:function(e,t,a,n){E("/vendor/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},create:function(e,t,a){f("/vendor/create",e,t,a)},delete:function(e,t,a){f("/vendor/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/vendor/update",e,t,a,"PUT")}},purchase:{list:function(e,t,a,n){E("/purchase/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},create:function(e,t,a){f("/purchase/create",e,t,a)},delete:function(e,t,a){f("/purchase/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/purchase/update",e,t,a,"PUT")}},vendorPayment:{list:function(e,t,a,n){E("/vendor/payment/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},create:function(e,t,a){f("/vendor/payment/create",e,t,a)},delete:function(e,t,a){f("/vendor/payment/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/vendor/payment/update",e,t,a,"PUT")}},customerPayment:{list:function(e,t,a,n){E("/customer/payment/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},create:function(e,t,a){f("/customer/payment/create",e,t,a)},delete:function(e,t,a){f("/customer/payment/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/customer/payment/update",e,t,a,"PUT")}},invoice:{list:function(e,t,a,n){E("/invoice/list?offset=".concat(e,"&query=").concat(t),a,n,!1)},sales:function(e,t,a){E("/invoice/".concat(e),t,a,!1)},create:function(e,t,a){f("/invoice/create",e,t,a)},delete:function(e,t,a){f("/invoice/delete",{id:e},t,a,"DELETE")},update:function(e,t,a){f("/invoice/update",e,t,a,"PUT")}},case:{getNext:function(e,t){E("/case/next",e,t,!1)}},bodyParts:{all:function(e,t){E("/bodypart/all",e,t,!1)}},subitems:{all:function(e,t){E("/subitem/all",e,t,!1)}}},b=h,v=a(182),p=a(111),y=a(66),O=a(212),j=a(191),C=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),i=Object(r.a)(l,2),u=i[0],s=i[1],d=Object(n.useState)(""),m=Object(r.a)(d,2),f=m[0],g=m[1];return c.a.createElement(v.a,{container:!0,justify:"center",alignItems:"center",direction:"row",style:{height:"100vh",backgroundColor:"lightBlue"}},c.a.createElement(v.a,{item:!0,md:4,sm:8,xs:12},c.a.createElement(p.a,{style:{padding:32,margin:16}},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(y.a,{variant:"h6",color:"error"},f)),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,variant:"outlined",label:"Email",type:"email",onChange:function(e){o(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,variant:"outlined",type:"password",label:"Password",onChange:function(e){s(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(j.a,{fullWidth:!0,variant:"contained",onClick:function(){g(""),b.user.login(a,u,(function(e){e.success?window.location.reload():g(e.message)}),(function(e){g(e.statusText)}))}},"Login"))))))},S=a(198),w=a(57),x=a(146),M=a(192),P=a(42),k=function(e){var t=Object(P.f)();return c.a.createElement(x.a,{button:!0,onClick:function(){t.push(e.link),e.close()},selected:e.selected,divider:!0},c.a.createElement(M.a,{primary:e.text}))},A=a(31),N=a(193),L=a(215),V=a(190),I=function(e){var t=Object(A.a)(),a=Object(N.a)(t.breakpoints.down("sm"));return c.a.createElement(c.a.Fragment,null,a&&c.a.createElement(L.a,{anchor:"left",open:e.showNav,onClose:e.toggleNavigation},c.a.createElement(V.a,null,e.items.map((function(t,a){return c.a.createElement(k,Object.assign({key:a},t,{close:e.toggleNavigation}))})))),!a&&c.a.createElement(V.a,null,e.items.map((function(t,a){return c.a.createElement(k,Object.assign({key:a},t,{close:e.toggleNavigation}))}))))},R=Object(P.g)((function(e){var t=e.history,a=Object(w.a)(e,["history"]),n=[{text:"Products",link:"/products",selected:"/products"===t.location.pathname||"/"===t.location.pathname},{text:"Purchases",link:"/purchases",selected:"/purchases"===t.location.pathname},{text:"Vendors",link:"/vendors",selected:"/vendors"===t.location.pathname},{text:"Customers",link:"/customers",selected:"/customers"===t.location.pathname},{text:"Accounts",link:"/accounts",selected:"/accounts"===t.location.pathname},{text:"Vendor Payments",link:"/payments/vendors",selected:"/payments/vendors"===t.location.pathname},{text:"Customer Payments",link:"/payments/customers",selected:"/payments/customer"===t.location.pathname},{text:"Invoices",link:"/invoices",selected:"/invoices"===t.location.pathname},{text:"Cities",link:"/cities",selected:"/cities"===t.location.pathname}];return c.a.createElement(I,{items:n,showNav:a.showNav,toggleNavigation:a.toggleNavigation})})),D=R,F=a(51),B=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(0),S=Object(r.a)(C,2),w=(S[0],S[1],Object(n.useState)()),x=Object(r.a)(w,2),M=(x[0],x[1],Object(n.useState)(0)),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(),L=Object(r.a)(N,2),V=L[0],I=L[1],R=function(e){c(!1),e&&u(!0)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!O){var a=m.length;!0===e&&(f([]),a=0),j(!0),b.product.list(a,t,(function(e){j(!1),f((function(t){return t.concat(e.data.rows)})),A(e.data.count)}),(function(){j(!1)}))}};return Object(n.useEffect)((function(){D(!0)}),[]),{showNewProductModal:function(){I(void 0),c(!0)},closeProductModal:R,modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteProduct:function(e){v(!0),b.product.delete(m[e].id,(function(t){if(t.success){var a=m.filter((function(t,a){return a!==e}));f(a),A((function(e){return e-1}))}v(!1)}),(function(){v(!1)}))},showEditProductModal:function(e){I(m[e]),c(!0)},addProduct:function(e){j(!0),b.product.create(e,(function(e){j(!1),e.success&&(m.unshift(e.data),f(m),A((function(e){return e+1})),R(!0))}),(function(){j(!1)}))},updateProduct:function(e){j(!0),b.product.update(e,(function(e){if(j(!1),e.success){var t=m.findIndex((function(t){return t.id==e.data.id}));m[t]=e.data,I(void 0),R(!0)}}),(function(){j(!1)}))},onChangeSearch:function(e){D(!0,e.target.value)},loadProducts:D,deleting:h,loading:O,rows:m,currentProduct:V,totalRows:k}},T=a(195),W=a(196),z=a(110),U=a(194),q=function(e){var t=Object(z.a)({},e),a=t.loading,n=t.disabled,o=Object(w.a)(t,["loading","disabled"]);return c.a.createElement(j.a,Object.assign({},o,{disabled:a||n,startIcon:a?c.a.createElement(U.a,{size:"1rem"}):""}),e.children)},Q=function(e){return!!(e&&e.length>0)},Y=function(e){return!(!Q(e)||!isNaN(Number(e)))},_=function(e){return/^[+]\d{12,15}$/.test(e)},J=function(e,t,a,c){var o=Object(n.useState)(""),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)(""),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(""),E=Object(r.a)(g,2),h=E[0],b=E[1],v=Object(n.useState)(""),p=Object(r.a)(v,2),y=p[0],O=p[1];Object(n.useEffect)((function(){var e,t;u((null===c||void 0===c?void 0:c.name)||""),f((null===c||void 0===c?void 0:c.details)||""),b((null===c||void 0===c||null===(e=c.quantity)||void 0===e?void 0:e.toString())||""),O((null===c||void 0===c||null===(t=c.rate)||void 0===t?void 0:t.toString())||"")}),[c]);var j=Object(n.useState)(""),C=Object(r.a)(j,2),S=C[0],w=C[1],x=Object(n.useState)(!1),M=Object(r.a)(x,2),P=M[0],k=M[1],A=Object(n.useState)(!1),N=Object(r.a)(A,2),L=N[0],V=N[1],I=Object(n.useState)(!1),R=Object(r.a)(I,2),D=R[0],F=R[1],B=function(){w(""),k(!1),F(!1),V(!1)};return{handleClick:function(){if(!a&&function(){B();var e=!0;return Q(i)?Y(y)?(e=!1,F(!0),w("Rate can only be digits")):Y(h)&&(e=!1,V(!0),w("Quantity can only be digits")):(e=!1,k(!0),w("Please give some name to your product.")),e}()){var t={id:null===c||void 0===c?void 0:c.id,name:i,details:m,quantity:Number(h)||0,rate:Number(y)||0};e(t)}},cancel:function(){B(),t(!1)},onNameChange:function(e){P&&(w(""),k(!1)),u(e)},onDetailsChange:function(e){f(e)},onQuantityChange:function(e){L&&(w(""),V(!1)),b(e)},onRateChange:function(e){D&&(w(""),F(!1)),O(e)},errorMessage:S,hasErrorName:P,hasErrorQuantity:L,hasErrorRate:D}},G=function(e){var t=e.open,a=e.close,n=e.onSubmit,o=e.existingProduct,l=e.loading,r=J(n,a,l,o),i=r.handleClick,u=r.onNameChange,s=r.onDetailsChange,d=r.onQuantityChange,m=r.onRateChange,f=r.errorMessage,g=r.hasErrorName,E=r.hasErrorQuantity,h=r.hasErrorRate,b=r.cancel;return c.a.createElement(T.a,{fullScreen:!0,open:t},c.a.createElement(W.a,null,o?"Update Your Product":"Add New Product"),f.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},f)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.name,error:g,label:"Product Name",onChange:function(e){u(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.details,label:"Details",multiline:!0,rows:3,onChange:function(e){s(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:6},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.quantity,error:E,label:"Quantity",onChange:function(e){d(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:6},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.rate,error:h,label:"Rate",onChange:function(e){m(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){b()}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:i,loading:l},o?"Update Product":"Add Product"))))))},H=a(211),$=a(209),K=function(e){return c.a.createElement(H.a,{open:e.open,autoHideDuration:1e3,onClose:function(t,a){"clickaway"!==a&&e.onClose()},anchorOrigin:{vertical:"top",horizontal:"right"}},c.a.createElement($.a,{variant:"filled",severity:e.severity},e.message))},X=a(17),Z=a.n(X),ee=a(24),te=a.n(ee),ae=a(197),ne=a(109),ce={primary:{blue:{light:"#F0F8FF",base:"#0066CC",interaction:"#006BF0",dark:"#003C66"},pink:{light:"#FFF0F3",base:"#FF4B73",interaction:"#FF4B73",dark:"#660016"},green:{light:"#F2FFF0",base:"#6ECC5A",interaction:"#38A321",dark:"#136600"},darkBlue:{light:"#F0F4FF",base:"#001E6E",interaction:"#001E6E",dark:"#000B29"}},secondary:{blue:{light:"#1DCEFF",dark:"#004EC9"},pink:{light:"#FFAFB9",dark:"#A61B56"},green:{light:"#29A900",dark:"#007600"}},system:{red:{light:"#FFF5F8",base:"#DC0043",dark:"#66001F"},orange:{light:"#FFF7F5",base:"#D43500",dark:"#661A00"},green:{light:"#F0FFF0",base:"#00814B",dark:"#064D00"}},grayscale:["#FFFFFF","#FCFCFC","#F5F5F5","#E1E1E1","#C8C8C8","#AFAFAF","#686868","#4B4B4B","#141414"]},oe={primary:[ce.primary.blue,ce.primary.pink,ce.primary.green,ce.primary.darkBlue],secondary:[ce.secondary.blue,ce.secondary.pink,ce.secondary.green],system:{error:ce.system.red,warning:ce.system.orange,success:ce.system.green},grayscale:ce.grayscale},le=Object(ne.a)({palette:{primary:{main:oe.primary[0].interaction}},props:{MuiTextField:{variant:"outlined"},MuiButton:{color:"primary",variant:"contained"}}}),re=function(e){return c.a.createElement(y.a,{variant:"h6",style:{color:e.color?e.color:oe.grayscale[8]}},e.children)},ie=function(e){return c.a.createElement(y.a,{variant:"h5",style:{color:e.color?e.color:oe.grayscale[8],fontWeight:"bold"}},e.children)},ue=function(e){return c.a.createElement(y.a,{variant:"body1",style:{color:e.color?e.color:oe.grayscale[8]}},e.children)},se=function(e){return c.a.createElement(y.a,{variant:"caption",style:{color:e.color?e.color:oe.grayscale[8]}},e.children)},de=a(39),me=a.n(de),fe=Object(S.a)({head:{}}),ge=function(e){var t=fe();return c.a.createElement("div",{className:t.head},e.rows.map((function(t,a){return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:a},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:1,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,c.a.createElement(me.a,{fontSize:"small"}))),c.a.createElement(v.a,{item:!0,xs:6,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,t.name),c.a.createElement("div",{style:{paddingTop:4}},c.a.createElement(ue,{color:oe.grayscale[7]},t.details))),c.a.createElement(v.a,{item:!0,style:{borderLeft:"1px solid ".concat(oe.grayscale[3]),paddingLeft:16,paddingRight:8,paddingTop:16,paddingBottom:16}},c.a.createElement(ue,{color:oe.grayscale[7]},"Rs."),c.a.createElement(ue,{color:oe.grayscale[7]},"Qt."),c.a.createElement(ue,{color:oe.primary[0].base},"Tl.")),c.a.createElement(v.a,{item:!0,xs:2,style:{paddingTop:16,paddingBottom:16}},c.a.createElement(ue,{color:oe.grayscale[7]},t.rate),c.a.createElement(ue,{color:oe.grayscale[7]},t.quantity),c.a.createElement(ue,{color:oe.primary[0].base},(t.quantity||0)*(t.rate||0))),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(ae.a,{"aria-label":"edit",onClick:function(){e.onEditProduct(a)}},c.a.createElement(te.a,{fontSize:"small"})),c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},Ee=a(187),he=a(102),be=a.n(he),ve=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 96px - 56px - 16px)"},header:{height:96,backgroundColor:oe.primary[0].light,borderBottom:"1px solid ".concat(oe.primary[0].base),padding:8}}),pe=function(e){var t=ve();return c.a.createElement("div",{className:t.wrapper},e.children)},ye=function(e){var t=ve();return c.a.createElement("div",{className:t.content},e.children)},Oe=function(e){var t=ve();return c.a.createElement("div",{className:t.header},c.a.createElement(Ee.a,{fullWidth:!0},c.a.createElement(O.a,{variant:"outlined",placeholder:e.placeholder,style:{backgroundColor:"white"},onChange:e.onChange})),c.a.createElement(ue,null,"Showing ",e.loadedRows," out of ",e.totalRows," ",e.label,c.a.createElement(ae.a,{onClick:e.openModal},c.a.createElement(be.a,{color:"primary"}))))},je=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),Ce=function(){var e=B(),t=e.showNewProductModal,a=e.closeProductModal,n=e.modalOpen,o=e.showSuccessMessage,l=e.hideSuccessMessage,r=e.deleteProduct,i=e.showEditProductModal,u=e.loadProducts,s=e.addProduct,d=e.updateProduct,m=e.deleting,f=e.loading,g=e.rows,E=e.currentProduct,h=e.totalRows,b=e.onChangeSearch;je();return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Products",loadedRows:g.length,totalRows:h,openModal:t,onChange:b,label:"products"}),c.a.createElement(ye,null,c.a.createElement(ge,{rows:g,onRowDelete:r,onEditProduct:i,deleting:m,onLoadMore:u,allLoaded:g.length==h,loading:f}))),c.a.createElement(K,{severity:"success",open:o,onClose:l,message:"Product added successfully"}),c.a.createElement(G,{open:n,loading:f,existingProduct:E,close:a,"aria-labelledby":"product_modal",onSubmit:E?d:s}))},Se=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(0),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(),P=Object(r.a)(M,2),k=P[0],A=P[1],N=function(e){c(!1),e&&u(!0)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!O){var a=m.length;!0===e&&(f([]),a=0),j(!0),b.customer.list(a,t,(function(e){j(!1),f((function(t){return t.concat(e.data.rows)})),x(e.data.count)}),(function(){j(!1)}))}};Object(n.useEffect)((function(){L(!0)}),[]);return{showNewCustomerModal:function(){A(void 0),c(!0)},showEditCustomerModal:function(e){A(m[e]),c(!0)},closeCustomerModal:N,modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteCustomer:function(e){v(!0),b.customer.delete(m[e].id,(function(t){if(t.success){var a=m.filter((function(t,a){return a!==e}));f(a)}v(!1)}),(function(){v(!1)}))},addCustomer:function(e){j(!0),b.customer.create(e,(function(e){j(!1),e.success&&(m.unshift(e.data),f(m),x((function(e){return e+1})),N(!0))}),(function(){j(!1)}))},updateCustomer:function(e){j(!0),b.customer.update(e,(function(e){if(j(!1),e.success){var t=m.findIndex((function(t){return t.id==e.data.id}));m[t]=e.data,A(void 0),N(!0)}}),(function(){j(!1)}))},loadCustomers:L,deleting:h,loading:O,totalRows:w,onChangeSearch:function(e){L(!0,e.target.value)},rows:m,currentCustomer:k}},we=function(e,t,a,c,o){var l=Object(n.useState)(""),i=Object(r.a)(l,2),u=i[0],s=i[1],d=Object(n.useState)(""),m=Object(r.a)(d,2),f=m[0],g=m[1],E=Object(n.useState)(""),h=Object(r.a)(E,2),b=h[0],v=h[1],p=Object(n.useState)(),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(""),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(!1),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(!1),L=Object(r.a)(N,2),V=L[0],I=L[1],R=Object(n.useState)(!1),D=Object(r.a)(R,2),F=D[0],B=D[1],T=Object(n.useState)(!1),W=Object(r.a)(T,2),z=W[0],U=W[1];Object(n.useEffect)((function(){var e;s((null===o||void 0===o?void 0:o.name)||""),g((null===o||void 0===o?void 0:o.mobile)||""),(null===o||void 0===o?void 0:o.cityId)&&j(c.cities.find((function(e){return e.id==(null===o||void 0===o?void 0:o.cityId)}))),v((null===o||void 0===o||null===(e=o.debt)||void 0===e?void 0:e.toString())||"")}),[o]);var q=function(){x(""),A(!1),I(!1),B(!1),U(!1)};return{handleClick:function(){if(!a&&function(){q();var e=!0;return Q(u)?_(f)?(e=!1,I(!0),x("Please give a valid mobile number")):void 0==O?(e=!1,B(!0),x("Please select a city from the list")):Y(b)&&(e=!1,U(!0),x("Please put a valid number for debt")):(e=!1,A(!0),x("Please give some name to your customer.")),e}()){var t={id:null===o||void 0===o?void 0:o.id,name:u,mobile:f,cityId:O.id,debt:Number(b)||0};e(t)}},cancel:function(){q(),t(!1)},onNameChange:function(e){s(e)},onMobileChange:function(e){g(e)},onDebtChange:function(e){v(e)},city:O,setCity:j,errorMessage:w,hasErrorName:k,hasErrorMobile:V,hasErrorCity:F,hasErrorDebt:z}},xe=a(210),Me=c.a.createContext({loading:!0,cities:[],setCities:function(){}}),Pe=function(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!1),u=Object(r.a)(i,2),s=u[0],d=u[1];Object(n.useEffect)((function(){m()}),[]);var m=function(){d(!0),b.city.list((function(e){d(!1),l(e.data)}),(function(){d(!1)}))};return c.a.createElement(Me.Provider,{value:{loading:s,cities:o,setCities:l}},e.children)},ke=function(e){var t=e.open,a=e.onSubmit,o=e.loading,l=e.close,r=e.existingCustomer,i=Object(n.useContext)(Me),u=we(a,l,o,i,r),s=u.handleClick,d=u.cancel,m=u.onNameChange,f=u.setCity,g=u.onMobileChange,E=u.onDebtChange,h=(u.city,u.errorMessage),b=u.hasErrorName,p=u.hasErrorMobile,j=u.hasErrorCity,C=u.hasErrorDebt;return c.a.createElement(T.a,{fullScreen:!0,open:t},c.a.createElement(W.a,null,r?"Update Your Customer":"Add New Customer"),h.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},h)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,error:b,label:"Customer Name",defaultValue:null===r||void 0===r?void 0:r.name,onChange:function(e){m(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,error:p,defaultValue:null===r||void 0===r?void 0:r.mobile,label:"Mobile Number",onChange:function(e){g(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:8},c.a.createElement(xe.a,{id:"city-search",options:i.cities,defaultValue:i.cities.find((function(e){return e.id==(null===r||void 0===r?void 0:r.cityId)})),getOptionLabel:function(e){return e.name},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{error:j,label:"City",variant:"outlined"}))},onChange:function(e,t){t&&f(t)}})),c.a.createElement(v.a,{item:!0,xs:4},c.a.createElement(O.a,{fullWidth:!0,error:C,defaultValue:null===r||void 0===r?void 0:r.debt,label:"Debt",onChange:function(e){E(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){d()}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:s,loading:o},r?"Update Customer":"Add Customer"))))))},Ae=a(55),Ne=a.n(Ae),Le=a(76),Ve=a.n(Le),Ie=function(e){var t=Object(n.useContext)(Me);return c.a.createElement("div",null,e.rows.map((function(a,n){var o;return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:n},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:1,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,c.a.createElement(me.a,{fontSize:"small"}))),c.a.createElement(v.a,{item:!0,xs:9,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,a.name),c.a.createElement("div",{style:{paddingTop:4}},c.a.createElement(v.a,{container:!0,alignItems:"baseline",spacing:1},c.a.createElement(v.a,{item:!0},c.a.createElement(se,null,"Debt:")),c.a.createElement(v.a,{item:!0},c.a.createElement(ie,{color:oe.primary[2].interaction},a.debt))))),c.a.createElement(v.a,{item:!0,xs:2},c.a.createElement(ae.a,{"aria-label":"edit",onClick:function(){e.onEditCustomer(n)}},c.a.createElement(te.a,{fontSize:"small"})),c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(n)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))),c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:6},c.a.createElement(v.a,{container:!0,justify:"center",spacing:1},c.a.createElement(v.a,{item:!0},c.a.createElement(Ne.a,{fontSize:"small",style:{color:oe.grayscale[7]}})),c.a.createElement(v.a,{item:!0},c.a.createElement(ue,{color:oe.grayscale[7]},a.mobile)))),c.a.createElement(v.a,{item:!0,xs:6},c.a.createElement(v.a,{container:!0,justify:"center",spacing:1},c.a.createElement(v.a,{item:!0},c.a.createElement(Ve.a,{fontSize:"small",style:{color:oe.grayscale[7]}})),c.a.createElement(v.a,{item:!0},c.a.createElement(ue,{color:oe.grayscale[7]},null===(o=t.cities.find((function(e){return e.id==a.cityId})))||void 0===o?void 0:o.name))))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},Re=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),De=function(){var e=Se(),t=e.showNewCustomerModal,a=e.showEditCustomerModal,n=e.closeCustomerModal,o=e.modalOpen,l=e.showSuccessMessage,r=e.hideSuccessMessage,i=e.deleteCustomer,u=e.loadCustomers,s=e.addCustomer,d=e.updateCustomer,m=e.deleting,f=e.loading,g=e.rows,E=e.totalRows,h=e.onChangeSearch,b=e.currentCustomer;Re();return c.a.createElement(Me.Consumer,null,(function(e){e.cities;return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Customers",loadedRows:g.length,totalRows:E,openModal:t,onChange:h,label:"customers"}),c.a.createElement(ye,null,c.a.createElement(Ie,{rows:g,onRowDelete:i,onEditCustomer:a,deleting:m,onLoadMore:u,allLoaded:g.length===E,loading:f}))),c.a.createElement(K,{severity:"success",open:l,onClose:r,message:"Customer added successfully"}),c.a.createElement(ke,{open:o,close:n,"aria-labelledby":"customer_modal",onSubmit:b?d:s,existingCustomer:b,loading:f}))}))},Fe=function(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),i=Object(r.a)(l,2),u=i[0],s=i[1],d=Object(n.useState)(!1),m=Object(r.a)(d,2),f=m[0],g=m[1],E=Object(n.useState)(!1),h=Object(r.a)(E,2),v=h[0],p=h[1],y=Object(n.useState)(),O=Object(r.a)(y,2),j=O[0],C=O[1],S=function(e){o(!1),e&&s(!0)};return{showNewCityModal:function(){C(void 0),o(!0)},showEditCityModal:function(t){C(e.cities[t]),o(!0)},currentCity:j,closeCityModal:S,modalOpen:c,showSuccessMessage:u,hideSuccessMessage:function(){s(!1)},deleteCity:function(t){g(!0),b.city.delete(e.cities[t].id,(function(a){if(a.success){var n=e.cities.filter((function(e,a){return a!==t}));e.setCities(n)}g(!1)}),(function(){g(!1)}))},addCity:function(t){console.log("add city"),p(!0),b.city.create(t,(function(t){p(!1),t.success&&(e.cities.unshift(t.data),e.setCities(e.cities),S(!0))}),(function(){p(!1)}))},updateCity:function(t){p(!0),b.city.update(t,(function(t){if(p(!1),t.success){var a=e.cities.findIndex((function(e){return e.id==t.data.id}));e.cities[a]=t.data,C(void 0),S(!0)}}),(function(){p(!1)}))},loadMoreCities:function(){},deleting:f,loading:v}},Be=function(e,t,a){var c=Object(n.useState)(""),o=Object(r.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(!1),s=Object(r.a)(u,2),d=s[0],m=(s[1],Object(n.useState)("")),f=Object(r.a)(m,2),g=f[0],E=f[1],h=Object(n.useState)(!1),b=Object(r.a)(h,2),v=b[0],p=b[1];Object(n.useEffect)((function(){i((null===a||void 0===a?void 0:a.name)||"")}),[a]);var y=function(){O();var e=!0;return Q(l)||(e=!1,p(!0),E("Please give some name to your city.")),e},O=function(){E(""),p(!1)};return{handleClick:function(){if(!d&&y()){var t={id:null===a||void 0===a?void 0:a.id,name:l};e(t)}},onNameChange:function(e){i(e)},loading:d,errorMessage:g,hasErrorName:v}},Te=function(e){var t=e.open,a=e.close,n=e.onSubmit,o=e.existingCity,l=Be(n,a,o),r=l.handleClick,i=l.onNameChange,u=l.loading,s=l.hasErrorName,d=l.errorMessage;return c.a.createElement(T.a,{fullScreen:!0,open:t},c.a.createElement(W.a,null,o?"Update Your City":"Add New City"),d.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},d)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.name,label:"City Name",error:s,onChange:function(e){i(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){a(!1)}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:r,loading:u},o?"Update City":"Add City"))))))},We=function(){var e=Object(n.useContext)(Me),t=Fe(e),a=(t.showSuccessMessage,t.hideSuccessMessage,t.modalOpen),o=t.currentCity,l=t.showNewCityModal,r=t.showEditCityModal,i=t.closeCityModal,u=t.deleteCity,s=t.addCity,d=t.updateCity;return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Cities",loadedRows:e.cities.length,totalRows:e.cities.length,openModal:l,label:"cities"}),c.a.createElement(ye,null,c.a.createElement(c.a.Fragment,null,e.loading&&c.a.createElement(U.a,null),c.a.createElement(V.a,null,e.cities.map((function(e,t){return c.a.createElement(x.a,{key:t},c.a.createElement(v.a,{container:!0,alignItems:"center"},c.a.createElement(v.a,{item:!0,xs:8},c.a.createElement(M.a,null,e.name)),c.a.createElement(v.a,{item:!0,xs:2},c.a.createElement(ae.a,{onClick:function(){r(t)}},c.a.createElement(te.a,null))),c.a.createElement(v.a,{item:!0,xs:2},c.a.createElement(ae.a,{onClick:function(){u(t)}},c.a.createElement(Z.a,null)))))})))))),c.a.createElement(Te,{open:a,close:i,existingCity:o,"aria-labelledby":"city_modal",onSubmit:o?d:s}))},ze=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(0),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(),P=Object(r.a)(M,2),k=P[0],A=P[1],N=function(e){c(!1),e&&u(!0)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!O){var a=m.length;!0===e&&(f([]),a=0),j(!0),b.vendor.list(a,t,(function(e){console.log("respoinse",e),j(!1),f((function(t){return t.concat(e.data.rows)})),x(e.data.count)}),(function(){j(!1)}))}};Object(n.useEffect)((function(){L(!0)}),[]);return{showNewVendorModal:function(){A(void 0),c(!0)},showEditVendorModal:function(e){A(m[e]),c(!0)},closeVendorModal:N,modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteVendor:function(e){v(!0),b.vendor.delete(m[e].id,(function(t){if(t.success){var a=m.filter((function(t,a){return a!==e}));f(a)}v(!1)}),(function(){v(!1)}))},addVendor:function(e){j(!0),b.vendor.create(e,(function(e){j(!1),e.success&&(m.unshift(e.data),f(m),x((function(e){return e+1})),N(!0))}),(function(){j(!1)}))},updateVendor:function(e){j(!0),b.vendor.update(e,(function(e){if(j(!1),e.success){var t=m.findIndex((function(t){return t.id==e.data.id}));m[t]=e.data,A(void 0),N(!0)}}),(function(){j(!1)}))},loadVendors:L,deleting:h,loading:O,totalRows:w,onChangeSearch:function(e){L(!0,e.target.value)},rows:m,currentVendor:k}},Ue=function(e,t,a,c,o){var l=Object(n.useState)(""),i=Object(r.a)(l,2),u=i[0],s=i[1],d=Object(n.useState)(""),m=Object(r.a)(d,2),f=m[0],g=m[1],E=Object(n.useState)(""),h=Object(r.a)(E,2),b=h[0],v=h[1],p=Object(n.useState)(),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(""),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(!1),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(!1),L=Object(r.a)(N,2),V=L[0],I=L[1],R=Object(n.useState)(!1),D=Object(r.a)(R,2),F=D[0],B=D[1],T=Object(n.useState)(!1),W=Object(r.a)(T,2),z=W[0],U=W[1];Object(n.useEffect)((function(){var e;s((null===o||void 0===o?void 0:o.name)||""),g((null===o||void 0===o?void 0:o.mobile)||""),(null===o||void 0===o?void 0:o.cityId)&&j(c.cities.find((function(e){return e.id==(null===o||void 0===o?void 0:o.cityId)}))),v((null===o||void 0===o||null===(e=o.debt)||void 0===e?void 0:e.toString())||"")}),[o]);var q=function(){x(""),A(!1),I(!1),B(!1),U(!1)};return{handleClick:function(){if(!a&&function(){q();var e=!0;return Q(u)?_(f)?(e=!1,I(!0),x("Please give a valid mobile number")):void 0==O?(e=!1,B(!0),x("Please select a city from the list")):Y(b)&&(e=!1,U(!0),x("Please put a valid number for debt")):(e=!1,A(!0),x("Please give some name to your vendor.")),e}()){var t={id:null===o||void 0===o?void 0:o.id,name:u,mobile:f,cityId:O.id,debt:Number(b)||0};e(t)}},cancel:function(){q(),t(!1)},onNameChange:function(e){s(e)},onMobileChange:function(e){g(e)},onDebtChange:function(e){v(e)},city:O,setCity:j,errorMessage:w,hasErrorName:k,hasErrorMobile:V,hasErrorCity:F,hasErrorDebt:z}},qe=function(e){var t=e.open,a=e.onSubmit,o=e.loading,l=e.close,r=e.existingVendor,i=Object(n.useContext)(Me),u=Ue(a,l,o,i,r),s=u.handleClick,d=u.cancel,m=u.onNameChange,f=u.setCity,g=u.onMobileChange,E=u.onDebtChange,h=(u.city,u.errorMessage),b=u.hasErrorName,p=u.hasErrorMobile,j=u.hasErrorCity,C=u.hasErrorDebt;return c.a.createElement(T.a,{fullScreen:!0,open:t},c.a.createElement(W.a,null,r?"Update Your Vendor":"Add New Vendor"),h.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},h)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,error:b,label:"Vendor Name",defaultValue:null===r||void 0===r?void 0:r.name,onChange:function(e){m(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,error:p,defaultValue:null===r||void 0===r?void 0:r.mobile,label:"Mobile Number",onChange:function(e){g(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:8},c.a.createElement(xe.a,{id:"city-search",options:i.cities,defaultValue:i.cities.find((function(e){return e.id==(null===r||void 0===r?void 0:r.cityId)})),getOptionLabel:function(e){return e.name},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{error:j,label:"City",variant:"outlined"}))},onChange:function(e,t){t&&f(t)}})),c.a.createElement(v.a,{item:!0,xs:4},c.a.createElement(O.a,{fullWidth:!0,error:C,defaultValue:null===r||void 0===r?void 0:r.debt,label:"Debt",onChange:function(e){E(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){d()}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:s,loading:o},r?"Update Vendor":"Add Vendor"))))))},Qe=function(e){var t=Object(n.useContext)(Me);return c.a.createElement("div",null,e.rows.map((function(a,n){var o;return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:n},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:1,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,c.a.createElement(me.a,{fontSize:"small"}))),c.a.createElement(v.a,{item:!0,xs:9,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,a.name),c.a.createElement("div",{style:{paddingTop:4}},c.a.createElement(v.a,{container:!0,alignItems:"baseline",spacing:1},c.a.createElement(v.a,{item:!0},c.a.createElement(se,null,"Debt:")),c.a.createElement(v.a,{item:!0},c.a.createElement(ie,{color:oe.primary[1].interaction},a.debt))))),c.a.createElement(v.a,{item:!0,xs:2},c.a.createElement(ae.a,{"aria-label":"edit",onClick:function(){e.onEditVendor(n)}},c.a.createElement(te.a,{fontSize:"small"})),c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(n)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))),c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:6},c.a.createElement(v.a,{container:!0,justify:"center",spacing:1},c.a.createElement(v.a,{item:!0},c.a.createElement(Ne.a,{fontSize:"small",style:{color:oe.grayscale[7]}})),c.a.createElement(v.a,{item:!0},c.a.createElement(ue,{color:oe.grayscale[7]},a.mobile)))),c.a.createElement(v.a,{item:!0,xs:6},c.a.createElement(v.a,{container:!0,justify:"center",spacing:1},c.a.createElement(v.a,{item:!0},c.a.createElement(Ve.a,{fontSize:"small",style:{color:oe.grayscale[7]}})),c.a.createElement(v.a,{item:!0},c.a.createElement(ue,{color:oe.grayscale[7]},null===(o=t.cities.find((function(e){return e.id==a.cityId})))||void 0===o?void 0:o.name))))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},Ye=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),_e=function(){var e=ze(),t=e.showNewVendorModal,a=e.showEditVendorModal,n=e.closeVendorModal,o=e.modalOpen,l=e.showSuccessMessage,r=e.hideSuccessMessage,i=e.deleteVendor,u=e.loadVendors,s=e.addVendor,d=e.updateVendor,m=e.deleting,f=e.loading,g=e.rows,E=e.totalRows,h=e.onChangeSearch,b=e.currentVendor;Ye();return c.a.createElement(Me.Consumer,null,(function(e){e.cities;return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Vendors",loadedRows:g.length,totalRows:E,openModal:t,onChange:h,label:"vendors"}),c.a.createElement(ye,null,c.a.createElement(Qe,{rows:g,onRowDelete:i,onEditVendor:a,deleting:m,onLoadMore:u,allLoaded:g.length===E,loading:f}))),c.a.createElement(K,{severity:"success",open:l,onClose:r,message:"Vendor added successfully"}),c.a.createElement(qe,{open:o,close:n,"aria-labelledby":"vendor_modal",onSubmit:b?d:s,existingVendor:b,loading:f}))}))},Je=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(0),S=Object(r.a)(C,2),w=(S[0],S[1],Object(n.useState)()),x=Object(r.a)(w,2),M=(x[0],x[1],Object(n.useState)(0)),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(),L=Object(r.a)(N,2),V=L[0],I=L[1],R=function(e){c(!1),e&&u(!0)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!O){var a=m.length;!0===e&&(f([]),a=0),j(!0),b.account.list(a,t,(function(e){j(!1),f((function(t){return t.concat(e.data.rows)})),A(e.data.count)}),(function(){j(!1)}))}};return Object(n.useEffect)((function(){D(!0)}),[]),{showNewAccountModal:function(){I(void 0),c(!0)},closeAccountModal:R,modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteAccount:function(e){v(!0),b.account.delete(m[e].id,(function(t){if(t.success){var a=m.filter((function(t,a){return a!==e}));f(a),A((function(e){return e-1}))}v(!1)}),(function(){v(!1)}))},showEditAccountModal:function(e){I(m[e]),c(!0)},addAccount:function(e){j(!0),b.account.create(e,(function(e){j(!1),e.success&&(m.unshift(e.data),f(m),A((function(e){return e+1})),R(!0))}),(function(){j(!1)}))},updateAccount:function(e){j(!0),b.account.update(e,(function(e){if(j(!1),e.success){var t=m.findIndex((function(t){return t.id==e.data.id}));m[t]=e.data,I(void 0),R(!0)}}),(function(){j(!1)}))},onChangeSearch:function(e){D(!0,e.target.value)},loadAccounts:D,deleting:h,loading:O,rows:m,currentAccount:V,totalRows:k}},Ge=a(214),He=a(208),$e=a(199),Ke=function(e,t,a,c){var o=Object(n.useState)(""),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)(""),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(""),E=Object(r.a)(g,2),h=E[0],b=E[1],v=Object(n.useState)(""),p=Object(r.a)(v,2),y=p[0],O=p[1],j=Object(n.useState)(!1),C=Object(r.a)(j,2),S=C[0],w=C[1],x=Object(n.useState)(!1),M=Object(r.a)(x,2),P=M[0],k=M[1],A=Object(n.useState)(!1),N=Object(r.a)(A,2),L=N[0],V=N[1],I=Object(n.useState)(""),R=Object(r.a)(I,2),D=R[0],F=R[1];Object(n.useEffect)((function(){var e;u((null===c||void 0===c?void 0:c.name)||""),O((null===c||void 0===c?void 0:c.details)||""),f((null===c||void 0===c?void 0:c.type)||""),b((null===c||void 0===c||null===(e=c.amount)||void 0===e?void 0:e.toString())||"")}),[c]);var B=function(){F(""),w(!1),k(!1),V(!1)};return{handleClick:function(){if(!a&&function(){B();var e=!0;return Q(i)?Q(m)?Y(h)&&(e=!1,k(!0),F("Amount can only be digits")):(e=!1,k(!0),F("Please select an account type")):(e=!1,w(!0),F("Please give some name to your account.")),e}()){var t={id:null===c||void 0===c?void 0:c.id,name:i,type:m,details:y,amount:Number(h)||0};e(t)}},onNameChange:function(e){u(e)},onDetailsChange:function(e){O(e)},onTypeChange:function(e){f(e)},onAmountChange:function(e){b(e)},loading:a,errorMessage:D,hasErrorAmount:L,hasErrorName:S,hasErrorType:P,cancel:function(){B(),u(""),O(""),f(""),b(""),t(!1)}}},Xe=function(e){var t=e.open,a=e.close,n=e.onSubmit,o=e.existingAccount,l=e.loading,r=Ke(n,a,l,o),i=r.handleClick,u=r.onNameChange,s=r.onDetailsChange,d=r.onTypeChange,m=r.onAmountChange,f=r.hasErrorAmount,g=r.hasErrorName,E=r.hasErrorType,h=r.errorMessage,b=r.cancel;return c.a.createElement(T.a,{open:t},c.a.createElement(W.a,null,o?"Update Your Account":"Add New Account"),h.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},h)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.name,error:g,label:"Account Name",onChange:function(e){u(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:4},c.a.createElement(Ee.a,{variant:"outlined",fullWidth:!0,error:E},c.a.createElement(Ge.a,{id:"demo-simple-select-outlined-label"},"Type"),c.a.createElement(He.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onChange:function(e){d(e.target.value)},defaultValue:null===o||void 0===o?void 0:o.type,label:"Type"},c.a.createElement($e.a,{value:"Cash"},"Cash"),c.a.createElement($e.a,{value:"Bank"},"Bank")))),c.a.createElement(v.a,{item:!0,xs:8},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.amount,error:f,label:"Account Amount",onChange:function(e){m(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,defaultValue:null===o||void 0===o?void 0:o.details,label:"Details",multiline:!0,rows:3,onChange:function(e){s(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){b()}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:i,loading:l},o?"Update Account":"Add Account"))))))},Ze=a(216),et=function(e){return c.a.createElement("div",null,e.rows.map((function(t,a){return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:a},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:10,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,t.name),c.a.createElement(ue,null,t.details),c.a.createElement(v.a,{container:!0,alignItems:"center",spacing:1},c.a.createElement(v.a,null,c.a.createElement(Ze.a,{label:t.type,size:"small"})),c.a.createElement(v.a,{item:!0},c.a.createElement(ie,{color:oe.primary[0].interaction},t.amount)))),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(ae.a,{"aria-label":"edit",onClick:function(){e.onEditAccount(a)}},c.a.createElement(te.a,{fontSize:"small"})),c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},tt=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),at=function(){var e=Je(),t=e.showNewAccountModal,a=e.closeAccountModal,n=e.modalOpen,o=e.showSuccessMessage,l=e.hideSuccessMessage,r=e.deleteAccount,i=e.showEditAccountModal,u=e.loadAccounts,s=e.addAccount,d=e.updateAccount,m=e.deleting,f=e.loading,g=e.rows,E=e.currentAccount,h=e.totalRows,b=e.onChangeSearch;tt();return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Accounts",loadedRows:g.length,totalRows:h,openModal:t,onChange:b,label:"accounts"}),c.a.createElement(ye,null,c.a.createElement(et,{rows:g,onRowDelete:r,onEditAccount:i,deleting:m,onLoadMore:u,allLoaded:g.length==h,loading:f}))),c.a.createElement(K,{severity:"success",open:o,onClose:l,message:"Account added successfully"}),c.a.createElement(Xe,{open:n,loading:f,existingAccount:E,close:a,"aria-labelledby":"account_modal",onSubmit:E?d:s}))},nt=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(0),S=Object(r.a)(C,2),w=(S[0],S[1],Object(n.useState)()),x=Object(r.a)(w,2),M=(x[0],x[1],Object(n.useState)(0)),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(),L=Object(r.a)(N,2),V=L[0],I=L[1],R=function(e){c(!1),e&&u(!0)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!O){var a=m.length;!0===e&&(f([]),a=0),j(!0),b.purchase.list(a,t,(function(e){j(!1),f((function(t){return t.concat(e.data.rows)})),A(e.data.count)}),(function(){j(!1)}))}};return Object(n.useEffect)((function(){D(!0)}),[]),{showNewPurchaseModal:function(){I(void 0),c(!0)},closePurchaseModal:R,modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deletePurchase:function(e){v(!0),b.purchase.delete(m[e].id,(function(t){if(t.success){var a=m.filter((function(t,a){return a!==e}));f(a)}v(!1)}),(function(){v(!1)}))},showEditPurchaseModal:function(e){I(m[e]),c(!0)},addPurchase:function(e){j(!0),b.purchase.create(e,(function(t){j(!1),t.success&&(m.unshift(e),f(m),A((function(e){return e+1})),R(!0))}),(function(){j(!1)}))},updatePurchase:function(e){j(!0),b.purchase.update(e,(function(e){if(j(!1),e.success){var t=m.findIndex((function(t){return t.id==e.data.id}));m[t]=e.data,I(void 0),R(!0)}}),(function(){j(!1)}))},onChangeSearch:function(e){D(!0,e.target.value)},loadPurchases:D,deleting:h,loading:O,rows:m,currentPurchase:V,totalRows:k}},ct=function(e,t,a,c){var o=Object(n.useState)([]),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(""),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(""),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(!1),L=Object(r.a)(N,2),V=L[0],I=L[1],R=Object(n.useState)(!1),D=Object(r.a)(R,2),F=D[0],B=D[1],T=Object(n.useState)(""),W=Object(r.a)(T,2),z=W[0],U=W[1],q=Object(n.useState)(!1),Q=Object(r.a)(q,2),_=Q[0],J=Q[1],G=Object(n.useState)(!1),H=Object(r.a)(G,2),$=H[0],K=H[1],X=Object(n.useState)(!1),Z=Object(r.a)(X,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(!1),ne=Object(r.a)(ae,2),ce=ne[0],oe=ne[1],le=function(){U(""),J(!1),K(!1),oe(!1),te(!1)};return{handleClick:function(){if(!a&&function(){le();var e=!0;return void 0==h?(e=!1,J(!0),U("Please select a product.")):void 0==O?(e=!1,K(!0),U("Please select a vendor.")):Y(k)?(e=!1,oe(!0),U("Rate can only be digits")):Y(w)&&(e=!1,te(!0),U("Quantity can only be digits")),e}()){var t={vendorId:null===O||void 0===O?void 0:O.id,vendorName:null===O||void 0===O?void 0:O.name,productId:null===h||void 0===h?void 0:h.id,productName:null===h||void 0===h?void 0:h.name,quantity:Number(w)||0,rate:Number(k)||0};e(t)}},onQuantityChange:function(e){ee&&(U(""),te(!1)),x(e)},onRateChange:function(e){ce&&(U(""),oe(!1)),A(e)},setProduct:v,setVendor:j,productsList:i,vendorsList:m,loadProducts:function(e){V||e.length<4||(I(!0),b.product.list(0,e,(function(e){I(!1),u(e.data.rows)}),(function(){I(!1)})))},loadVendors:function(e){F||e.length<4||(B(!0),b.vendor.list(0,e,(function(e){B(!1),f(e.data.rows)}),(function(){B(!1)})))},loadingProducts:V,loadingVendors:F,hasErrorVendor:$,hasErrorProduct:_,hasErrorRate:ce,hasErrorQuantity:ee,errorMessage:z,cancel:function(){le(),t(!1)}}},ot=function(e){var t=e.open,a=e.close,n=e.onSubmit,o=e.loading,l=e.existingPurchase,r=ct(n,a,o,l),i=r.handleClick,u=r.onQuantityChange,s=r.onRateChange,d=r.setProduct,m=r.setVendor,f=r.vendorsList,g=r.productsList,E=r.loadProducts,h=r.loadVendors,b=r.loadingProducts,p=r.loadingVendors,j=r.cancel,C=r.hasErrorVendor,S=r.hasErrorProduct,w=(r.hasErrorQuantity,r.hasErrorRate),x=r.errorMessage;return c.a.createElement(T.a,{fullScreen:!0,open:t},c.a.createElement(W.a,null,"Add New Purchase"),x.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},x)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(xe.a,{id:"vendor-search",options:f,loading:p,getOptionLabel:function(e){return e.name||"Dummy Vendor"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Vendor",variant:"outlined",error:C,onChange:function(e){h(e.target.value)}}))},onChange:function(e,t){t&&m(t)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(xe.a,{id:"product-search",options:g,loading:b,getOptionLabel:function(e){return e.name||"Dummy Product"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Product",variant:"outlined",error:C,onChange:function(e){E(e.target.value)}}))},onChange:function(e,t){t&&d(t)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Quantity",error:S,onChange:function(e){u(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Rate",error:w,onChange:function(e){s(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){j()}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:i,loading:o},"Add Purchase"))))))},lt=Object(S.a)({head:{}}),rt=function(e){var t=lt();return c.a.createElement("div",{className:t.head},e.rows.map((function(t,a){return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:a},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:1,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,c.a.createElement(me.a,{fontSize:"small"}))),c.a.createElement(v.a,{item:!0,xs:6,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,t.productName),c.a.createElement("div",{style:{paddingTop:4}},c.a.createElement(ue,{color:oe.grayscale[7]},t.vendorName))),c.a.createElement(v.a,{item:!0,style:{borderLeft:"1px solid ".concat(oe.grayscale[3]),paddingLeft:16,paddingRight:8,paddingTop:16,paddingBottom:16}},c.a.createElement(ue,{color:oe.grayscale[7]},"Rs."),c.a.createElement(ue,{color:oe.grayscale[7]},"Qt."),c.a.createElement(ue,{color:oe.primary[0].base},"Tl.")),c.a.createElement(v.a,{item:!0,xs:2,style:{paddingTop:16,paddingBottom:16}},c.a.createElement(ue,{color:oe.grayscale[7]},t.rate),c.a.createElement(ue,{color:oe.grayscale[7]},t.quantity),c.a.createElement(ue,{color:oe.primary[0].base},(t.quantity||0)*(t.rate||0))),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},it=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),ut=function(){var e=nt(),t=e.showNewPurchaseModal,a=e.closePurchaseModal,n=e.modalOpen,o=e.showSuccessMessage,l=e.hideSuccessMessage,r=e.deletePurchase,i=(e.showEditPurchaseModal,e.loadPurchases),u=e.addPurchase,s=e.updatePurchase,d=e.deleting,m=e.loading,f=e.rows,g=e.currentPurchase,E=e.totalRows,h=e.onChangeSearch;it();return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Purchases",loadedRows:f.length,totalRows:E,openModal:t,onChange:h,label:"purchases"}),c.a.createElement(ye,null,c.a.createElement(rt,{rows:f,onRowDelete:r,deleting:d,onLoadMore:i,allLoaded:f.length==E,loading:m}))),c.a.createElement(K,{severity:"success",open:o,onClose:l,message:"Purchase added successfully"}),c.a.createElement(ot,{open:n,loading:m,close:a,"aria-labelledby":"purchase_modal",onSubmit:g?s:u}))},st=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)(!1),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)([]),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(!1),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(!1),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(),L=Object(r.a)(N,2),V=L[0],I=L[1],R=Object(n.useState)(0),D=Object(r.a)(R,2),F=D[0],B=D[1],T=Object(n.useState)(),W=Object(r.a)(T,2),z=W[0],U=W[1],q=function(e){c(!1),e&&f(!0)},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!w){var a=h.length;!0===e&&(v([]),a=0),x(!0),b.invoice.list(a,t,(function(e){x(!1),v((function(t){return t.concat(e.data.rows)})),B(e.data.count)}),(function(){x(!1)}))}};return Object(n.useEffect)((function(){Q(!0)}),[]),{showNewInvoiceModal:function(){U(void 0),c(!0)},closeInvoiceModal:q,modalOpen:a,showSuccessMessage:m,hideSuccessMessage:function(){f(!1)},deleteInvoice:function(e){j(!0),b.invoice.delete(h[e].id,(function(t){if(t.success){var a=h.filter((function(t,a){return a!==e}));v(a)}j(!1)}),(function(){j(!1)}))},showEditInvoiceModal:function(e){U(h[e]),c(!0)},addInvoice:function(e){x(!0),b.invoice.create(e,(function(t){x(!1),t.success&&(e.bill=t.data.bill,e.totalSales=t.data.totalSales,h.unshift(e),v(h),B((function(e){return e+1})),q(!0))}),(function(){x(!1)}))},updateInvoice:function(e){x(!0),b.invoice.update(e,(function(e){if(x(!1),e.success){var t=h.findIndex((function(t){return t.id==e.data.id}));h[t]=e.data,U(void 0),q(!0)}}),(function(){x(!1)}))},onChangeSearch:function(e){Q(!0,e.target.value)},loadInvoices:Q,deleting:O,loading:w,rows:h,currentInvoice:z,totalRows:F,openSalesModal:i,loadInvoiceSales:function(e){A(!0),u(!0),b.invoice.sales(h[e].id,(function(t){if(t.success){var a=h[e];a.sales=t.data.rows,I(a)}A(!1)}),(function(){x(!1)}))},loadingSales:k,detailedInvoice:V,closeInvoiceSales:function(){u(!1),I(void 0)}}},dt=function(e,t,a,c){var o=Object(n.useState)(),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([{}]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)([]),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)([]),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(!1),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(!1),P=Object(r.a)(M,2),k=P[0],A=P[1];return{handleClick:function(){if(!a){var t={customerId:null===i||void 0===i?void 0:i.id,customerName:null===i||void 0===i?void 0:i.name,sales:m};e(t)}},addSale:function(){var e=m.concat({});f(e)},sales:m,setCustomer:u,productsList:h,customersList:O,loadProducts:function(e){w||e.length<4||(x(!0),b.product.list(0,e,(function(e){x(!1),v(e.data.rows)}),(function(){x(!1)})))},loadCustomers:function(e){k||e.length<4||(A(!0),b.customer.list(0,e,(function(e){A(!1),j(e.data.rows)}),(function(){A(!1)})))},loadingProducts:w,loadingCustomers:k}},mt=function(e){var t=e.open,a=e.close,n=e.onSubmit,o=e.loading,l=e.existingInvoice,r=dt(n,a,o,l),i=r.handleClick,u=r.productsList,s=r.customersList,d=r.loadingProducts,m=r.loadingCustomers,f=r.loadProducts,g=r.loadCustomers,E=r.setCustomer,h=r.sales,b=r.addSale;return c.a.createElement(T.a,{fullScreen:!0,open:t},c.a.createElement(W.a,null,"Add New Invoice"),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(xe.a,{id:"customer-search",options:s,loading:m,getOptionLabel:function(e){return e.name||"Dummy Customer"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Customer",variant:"outlined",onChange:function(e){g(e.target.value)}}))},onChange:function(e,t){t&&E(t)}})),null===h||void 0===h?void 0:h.map((function(e,t){return c.a.createElement(v.a,{item:!0,xs:12,key:t},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:6},c.a.createElement(xe.a,{id:"product-search",options:u,loading:d,getOptionLabel:function(e){return e.name||"Dummy Product"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Product",variant:"outlined",onChange:function(e){f(e.target.value)}}))},onChange:function(t,a){e.productId=null===a||void 0===a?void 0:a.id}})),c.a.createElement(v.a,{item:!0,xs:3},c.a.createElement(O.a,{fullWidth:!0,label:"Quantity",type:"number",onChange:function(t){e.quantity=Number(t.target.value)}})),c.a.createElement(v.a,{item:!0,xs:3},c.a.createElement(O.a,{fullWidth:!0,label:"Rate",type:"number",onChange:function(t){e.rate=Number(t.target.value)}}))))})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(q,{onClick:function(){b()}},"Add Sale")))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){a(!1)}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:i,loading:o},"Add Invoice"))))))},ft=a(104),gt=a.n(ft),Et=function(e){return c.a.createElement("div",null,e.rows.map((function(t,a){return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:a},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:11,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,t.customerName),c.a.createElement(ie,{color:oe.primary[0].interaction},t.bill),c.a.createElement(se,null,t.totalSales," sales")),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(ae.a,{"aria-label":"edit",onClick:function(){e.onRowView(a)}},c.a.createElement(gt.a,{fontSize:"small"})),c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},ht=a(200),bt=a(201),vt=a(202),pt=a(203),yt=a(204),Ot=function(){return c.a.createElement(v.a,{container:!0,style:{height:"100%"},justify:"center",alignContent:"center"},c.a.createElement(v.a,{item:!0},c.a.createElement(U.a,null)))},jt=function(e){var t,a=e.open,n=e.close,o=e.loading,l=e.invoice;return c.a.createElement(T.a,{fullScreen:!0,open:a},o?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ot,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement(W.a,null,null===l||void 0===l?void 0:l.customerName),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(ht.a,null,c.a.createElement(bt.a,null,c.a.createElement(vt.a,null,c.a.createElement(pt.a,null,"Product"),c.a.createElement(pt.a,null,"Quantity"),c.a.createElement(pt.a,null,"Rate"),c.a.createElement(pt.a,null,"Amount"))),c.a.createElement(yt.a,null,null===l||void 0===l||null===(t=l.sales)||void 0===t?void 0:t.map((function(e){return c.a.createElement(vt.a,null,c.a.createElement(pt.a,null,e.productName),c.a.createElement(pt.a,null,e.quantity),c.a.createElement(pt.a,null,e.rate),c.a.createElement(pt.a,null,e.rate*e.quantity))})),c.a.createElement(vt.a,null,c.a.createElement(pt.a,null),c.a.createElement(pt.a,null),c.a.createElement(pt.a,null,"Total:"),c.a.createElement(pt.a,null,c.a.createElement(ie,{color:oe.primary[0].interaction},null===l||void 0===l?void 0:l.bill))))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){n()}},"Cancel")))))))},Ct=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),St=function(){var e=st(),t=e.showNewInvoiceModal,a=e.closeInvoiceModal,n=e.modalOpen,o=e.showSuccessMessage,l=e.hideSuccessMessage,r=e.deleteInvoice,i=(e.showEditInvoiceModal,e.loadInvoices),u=e.addInvoice,s=e.updateInvoice,d=e.deleting,m=e.loading,f=e.rows,g=e.currentInvoice,E=e.totalRows,h=e.onChangeSearch,b=e.openSalesModal,v=e.loadInvoiceSales,p=e.loadingSales,y=e.detailedInvoice,O=e.closeInvoiceSales;Ct();return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Invoices",loadedRows:f.length,totalRows:E,openModal:t,onChange:h,label:"invoices"}),c.a.createElement(ye,null,c.a.createElement(Et,{rows:f,onRowDelete:r,onRowView:v,deleting:d,onLoadMore:i,allLoaded:f.length==E,loading:m}))),c.a.createElement(K,{severity:"success",open:o,onClose:l,message:"Invoice added successfully"}),c.a.createElement(mt,{open:n,loading:m,existingInvoice:g,close:a,"aria-labelledby":"invoice_modal",onSubmit:g?s:u}),c.a.createElement(jt,{open:b,loading:p,invoice:y,close:O}))},wt=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(0),S=Object(r.a)(C,2),w=(S[0],S[1],Object(n.useState)()),x=Object(r.a)(w,2),M=(x[0],x[1],Object(n.useState)(0)),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(),L=Object(r.a)(N,2),V=L[0],I=L[1],R=function(e){c(!1),e&&u(!0)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!O){var a=m.length;!0===e&&(f([]),a=0),j(!0),b.vendorPayment.list(a,t,(function(e){j(!1),f((function(t){return t.concat(e.data.rows)})),A(e.data.count)}),(function(){j(!1)}))}};return Object(n.useEffect)((function(){D(!0)}),[]),{showNewVendorPaymentModal:function(){I(void 0),c(!0)},closeVendorPaymentModal:R,modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteVendorPayment:function(e){v(!0),b.vendorPayment.delete(m[e].id,(function(t){if(t.success){var a=m.filter((function(t,a){return a!==e}));f(a)}v(!1)}),(function(){v(!1)}))},showEditVendorPaymentModal:function(e){I(m[e]),c(!0)},addVendorPayment:function(e){j(!0),b.vendorPayment.create(e,(function(t){j(!1),t.success&&(m.unshift(e),f(m),A((function(e){return e+1})),R(!0))}),(function(){j(!1)}))},updateVendorPayment:function(e){j(!0),b.vendorPayment.update(e,(function(e){if(j(!1),e.success){var t=m.findIndex((function(t){return t.id==e.data.id}));m[t]=e.data,I(void 0),R(!0)}}),(function(){j(!1)}))},onChangeSearch:function(e){D(!0,e.target.value)},loadVendorPayments:D,deleting:h,loading:O,rows:m,currentVendorPayment:V,totalRows:k}},xt=function(e,t,a,c){var o=Object(n.useState)([]),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(""),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(""),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(!1),L=Object(r.a)(N,2),V=L[0],I=L[1],R=Object(n.useState)(!1),D=Object(r.a)(R,2),F=D[0],B=D[1],T=Object(n.useState)(!1),W=Object(r.a)(T,2),z=W[0],U=W[1],q=Object(n.useState)(""),Q=Object(r.a)(q,2),_=Q[0],J=Q[1],G=Object(n.useState)(!1),H=Object(r.a)(G,2),$=H[0],K=H[1],X=Object(n.useState)(!1),Z=Object(r.a)(X,2),ee=Z[0],te=Z[1],ae=function(){J(""),B(!1),I(!1),U(!1)};return{handleClick:function(){if(!a&&function(){ae();var e=!0;return void 0==h?(e=!1,I(!0),J("Please select a vendor.")):void 0==O?(e=!1,B(!0),J("Please select a vendor.")):Y(w)&&(e=!1,U(!0),J("Amount can only be digits")),e}()){var t={id:null===c||void 0===c?void 0:c.id,vendorId:null===h||void 0===h?void 0:h.id,vendorName:null===h||void 0===h?void 0:h.name,accountId:null===O||void 0===O?void 0:O.id,accountName:null===O||void 0===O?void 0:O.name,amount:Number(w)||0,details:k};e(t)}},onAmountChange:function(e){x(e)},onDetailsChange:function(e){A(e)},setVendor:v,setAccount:j,vendorsList:m,accountsList:i,loadAccounts:function(e){$||e.length<4||(K(!0),b.account.list(0,e,(function(e){K(!1),u(e.data.rows)}),(function(){K(!1)})))},loadVendors:function(e){ee||e.length<4||(te(!0),b.vendor.list(0,e,(function(e){te(!1),f(e.data.rows)}),(function(){te(!1)})))},loadingAccounts:$,loadingVendors:ee,loading:a,cancel:function(){ae(),t(!1)},hasErrorAmount:z,hasErrorAccount:F,hasErrorVendor:V,errorMessage:_}},Mt=function(e){var t=e.open,a=e.close,n=e.onSubmit,o=e.loading,l=e.existingVendorPayment,r=xt(n,a,o,l),i=r.handleClick,u=r.onAmountChange,s=r.onDetailsChange,d=r.setVendor,m=r.setAccount,f=r.vendorsList,g=r.accountsList,E=r.loadingAccounts,h=r.loadingVendors,b=r.hasErrorAccount,p=r.hasErrorAmount,j=r.hasErrorVendor,C=r.cancel,S=r.errorMessage,w=r.loadVendors,x=r.loadAccounts;return c.a.createElement(T.a,{open:t},c.a.createElement(W.a,null,"Add New VendorPayment"),S.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},S)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(xe.a,{id:"vendor-search",options:f,loading:h,getOptionLabel:function(e){return e.name||"Dummy Vendor"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Vendor",variant:"outlined",error:j,onChange:function(e){w(e.target.value)}}))},onChange:function(e,t){t&&d(t)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(xe.a,{id:"account-search",options:g,loading:E,getOptionLabel:function(e){return e.name||"Dummy Account"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Account",variant:"outlined",error:b,onChange:function(e){x(e.target.value)}}))},onChange:function(e,t){t&&m(t)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Amount",error:p,onChange:function(e){u(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Details",multiline:!0,rows:3,onChange:function(e){s(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){C()}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:i,loading:o},"Add Vendor Payment"))))))},Pt=a(78),kt=a.n(Pt),At=function(e){return c.a.createElement("div",null,e.rows.map((function(t,a){return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:a},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:10,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,t.vendorName),c.a.createElement(ue,null,t.details),c.a.createElement(ie,{color:oe.primary[0].interaction},t.amount),c.a.createElement(v.a,{container:!0,spacing:1,style:{paddingTop:8}},c.a.createElement(v.a,{item:!0},c.a.createElement(kt.a,{fontSize:"small",style:{color:oe.grayscale[6]}})),c.a.createElement(v.a,{item:!0},c.a.createElement(se,{color:oe.grayscale[7]},t.accountName)))),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},Nt=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),Lt=function(){var e=wt(),t=e.showNewVendorPaymentModal,a=e.closeVendorPaymentModal,n=e.modalOpen,o=e.showSuccessMessage,l=e.hideSuccessMessage,r=e.deleteVendorPayment,i=(e.showEditVendorPaymentModal,e.loadVendorPayments),u=e.addVendorPayment,s=e.updateVendorPayment,d=e.deleting,m=e.loading,f=e.rows,g=e.currentVendorPayment,E=e.totalRows,h=e.onChangeSearch;Nt();return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Vendor Payments",loadedRows:f.length,totalRows:E,openModal:t,onChange:h,label:"Vendor Payments"}),c.a.createElement(ye,null,c.a.createElement(At,{rows:f,onRowDelete:r,deleting:d,onLoadMore:i,allLoaded:f.length==E,loading:m}))),c.a.createElement(K,{severity:"success",open:o,onClose:l,message:"VendorPayment added successfully"}),c.a.createElement(Mt,{open:n,loading:m,close:a,"aria-labelledby":"vendorPayment_modal",onSubmit:g?s:u}))},Vt=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(!1),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(0),S=Object(r.a)(C,2),w=(S[0],S[1],Object(n.useState)()),x=Object(r.a)(w,2),M=(x[0],x[1],Object(n.useState)(0)),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(),L=Object(r.a)(N,2),V=L[0],I=L[1],R=function(e){c(!1),e&&u(!0)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!O){var a=m.length;!0===e&&(f([]),a=0),j(!0),b.customerPayment.list(a,t,(function(e){j(!1),f((function(t){return t.concat(e.data.rows)})),A(e.data.count)}),(function(){j(!1)}))}};return Object(n.useEffect)((function(){D(!0)}),[]),{showNewCustomerPaymentModal:function(){I(void 0),c(!0)},closeCustomerPaymentModal:R,modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteCustomerPayment:function(e){v(!0),b.customerPayment.delete(m[e].id,(function(t){if(t.success){var a=m.filter((function(t,a){return a!==e}));f(a)}v(!1)}),(function(){v(!1)}))},showEditCustomerPaymentModal:function(e){I(m[e]),c(!0)},addCustomerPayment:function(e){j(!0),b.customerPayment.create(e,(function(t){j(!1),t.success&&(m.unshift(e),f(m),A((function(e){return e+1})),R(!0))}),(function(){j(!1)}))},updateCustomerPayment:function(e){j(!0),b.customerPayment.update(e,(function(e){if(j(!1),e.success){var t=m.findIndex((function(t){return t.id==e.data.id}));m[t]=e.data,I(void 0),R(!0)}}),(function(){j(!1)}))},onChangeSearch:function(e){D(!0,e.target.value)},loadCustomerPayments:D,deleting:h,loading:O,rows:m,currentCustomerPayment:V,totalRows:k}},It=function(e,t,a,c){var o=Object(n.useState)([]),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(),E=Object(r.a)(g,2),h=E[0],v=E[1],p=Object(n.useState)(),y=Object(r.a)(p,2),O=y[0],j=y[1],C=Object(n.useState)(""),S=Object(r.a)(C,2),w=S[0],x=S[1],M=Object(n.useState)(""),P=Object(r.a)(M,2),k=P[0],A=P[1],N=Object(n.useState)(!1),L=Object(r.a)(N,2),V=L[0],I=L[1],R=Object(n.useState)(!1),D=Object(r.a)(R,2),F=D[0],B=D[1],T=Object(n.useState)(!1),W=Object(r.a)(T,2),z=W[0],U=W[1],q=Object(n.useState)(""),Q=Object(r.a)(q,2),_=Q[0],J=Q[1],G=Object(n.useState)(!1),H=Object(r.a)(G,2),$=H[0],K=H[1],X=Object(n.useState)(!1),Z=Object(r.a)(X,2),ee=Z[0],te=Z[1],ae=function(){J(""),B(!1),I(!1),U(!1)};return{handleClick:function(){if(!a&&function(){ae();var e=!0;return void 0==h?(e=!1,I(!0),J("Please select a customer.")):void 0==O?(e=!1,B(!0),J("Please select a customer.")):Y(w)&&(e=!1,U(!0),J("Amount can only be digits")),e}()){var t={id:null===c||void 0===c?void 0:c.id,customerId:null===h||void 0===h?void 0:h.id,customerName:null===h||void 0===h?void 0:h.name,accountId:null===O||void 0===O?void 0:O.id,accountName:null===O||void 0===O?void 0:O.name,amount:Number(w)||0,details:k};e(t)}},onAmountChange:function(e){x(e)},onDetailsChange:function(e){A(e)},setCustomer:v,setAccount:j,customersList:m,accountsList:i,loadAccounts:function(e){$||e.length<4||(K(!0),b.account.list(0,e,(function(e){K(!1),u(e.data.rows)}),(function(){K(!1)})))},loadCustomers:function(e){ee||e.length<4||(te(!0),b.customer.list(0,e,(function(e){te(!1),f(e.data.rows)}),(function(){te(!1)})))},loadingAccounts:$,loadingCustomers:ee,loading:a,cancel:function(){ae(),t(!1)},hasErrorAmount:z,hasErrorAccount:F,hasErrorCustomer:V,errorMessage:_}},Rt=function(e){var t=e.open,a=e.close,n=e.onSubmit,o=e.loading,l=e.existingCustomerPayment,r=It(n,a,o,l),i=r.handleClick,u=r.onAmountChange,s=r.onDetailsChange,d=r.setCustomer,m=r.setAccount,f=r.customersList,g=r.accountsList,E=r.loadingAccounts,h=r.loadingCustomers,b=r.hasErrorAccount,p=r.hasErrorAmount,j=r.hasErrorCustomer,C=r.cancel,S=r.errorMessage,w=r.loadCustomers,x=r.loadAccounts;return c.a.createElement(T.a,{open:t},c.a.createElement(W.a,null,"Add New CustomerPayment"),S.length>0&&c.a.createElement("div",{style:{paddingLeft:24}},c.a.createElement(y.a,{variant:"body1",color:"error"},S)),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(xe.a,{id:"customer-search",options:f,loading:h,getOptionLabel:function(e){return e.name||"Dummy Customer"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Customer",variant:"outlined",error:j,onChange:function(e){w(e.target.value)}}))},onChange:function(e,t){t&&d(t)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(xe.a,{id:"account-search",options:g,loading:E,getOptionLabel:function(e){return e.name||"Dummy Account"},renderInput:function(e){return c.a.createElement(O.a,Object.assign({},e,{label:"Search Account",variant:"outlined",error:b,onChange:function(e){x(e.target.value)}}))},onChange:function(e,t){t&&m(t)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Amount",error:p,onChange:function(e){u(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Details",multiline:!0,rows:3,onChange:function(e){s(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){C()}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:i,loading:o},"Add Customer Payment"))))))},Dt=function(e){return c.a.createElement("div",null,e.rows.map((function(t,a){return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:a},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:10,style:{paddingTop:8,paddingBottom:8}},c.a.createElement(re,null,t.customerName),c.a.createElement(ue,null,t.details),c.a.createElement(ie,{color:oe.primary[0].interaction},t.amount),c.a.createElement(v.a,{container:!0,spacing:1,style:{paddingTop:8}},c.a.createElement(v.a,{item:!0},c.a.createElement(kt.a,{fontSize:"small",style:{color:oe.grayscale[6]}})),c.a.createElement(v.a,{item:!0},c.a.createElement(se,{color:oe.grayscale[7]},t.accountName)))),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(ae.a,{"aria-label":"edit"},c.a.createElement(te.a,{fontSize:"small"})),c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},Ft=Object(S.a)({wrapper:{height:"100vh"},content:{overflowY:"scroll",height:"calc(100vh - 110px - 56px - 16px)"}}),Bt=function(){var e=Vt(),t=e.showNewCustomerPaymentModal,a=e.closeCustomerPaymentModal,n=e.modalOpen,o=e.showSuccessMessage,l=e.hideSuccessMessage,r=e.deleteCustomerPayment,i=(e.showEditCustomerPaymentModal,e.loadCustomerPayments),u=e.addCustomerPayment,s=e.updateCustomerPayment,d=e.deleting,m=e.loading,f=e.rows,g=e.currentCustomerPayment,E=e.totalRows,h=e.onChangeSearch;Ft();return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Customer Payments",loadedRows:f.length,totalRows:E,openModal:t,onChange:h,label:"Customer Payments"}),c.a.createElement(ye,null,c.a.createElement(Dt,{rows:f,onRowDelete:r,deleting:d,onLoadMore:i,allLoaded:f.length==E,loading:m}))),c.a.createElement(K,{severity:"success",open:o,onClose:l,message:"CustomerPayment added successfully"}),c.a.createElement(Rt,{open:n,loading:m,close:a,"aria-labelledby":"customerPayment_modal",onSubmit:g?s:u}))},Tt=a(13),Wt=a.n(Tt),zt={product:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("products").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("products").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("products").doc(e).delete().then((function(){t&&t()})).catch((function(e){e&&e()}))}},customer:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("customers").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("customers").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("customers").doc(e).delete().then((function(){t&&t()})).catch((function(e){e&&e()}))}},purchase:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("purchases").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("purchases").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("purchases").doc(e).delete().then((function(){t&&t()})).catch((function(){a&&a()}))}},invoice:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("invoices").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("invoices").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("invoices").doc(e).delete().then((function(){t&&t()})).catch((function(){a&&a()}))}},vendor:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("vendors").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("vendors").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("vendors").doc(e).delete().then((function(){t&&t()})).catch((function(e){e&&e()}))}},city:{get:function(e,t,a){Object(Tt.firestore)().collection("cities").orderBy("name").get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("cities").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("cities").doc(e).delete().then((function(){t&&t()})).catch((function(e){e&&e()}))}},account:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("accounts").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("accounts").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("accounts").doc(e).delete().then((function(){t&&t()})).catch((function(e){e&&e()}))}},vendorPayment:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("vendorPayments").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("vendorPayments").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("vendorPayments").doc(e).delete().then((function(){t&&t()})).catch((function(){a&&a()}))}},customerPayment:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("customerPayments").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("customerPayments").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("customerPayments").doc(e).delete().then((function(){t&&t()})).catch((function(){a&&a()}))}},employee:{get:function(e,t,a){var n=Object(Tt.firestore)().collection("employees").limit(5).orderBy("createdAt","desc");a&&(n=n.startAfter(a)),n.get().then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))},add:function(e,t,a){Object(Tt.firestore)().collection("employees").add(e).then((function(e){t(e.id)})).catch((function(){a()}))},delete:function(e,t,a){Object(Tt.firestore)().collection("employees").doc(e).delete().then((function(){t&&t()})).catch((function(e){e&&e()}))}},counts:{get:function(e){Object(Tt.firestore)().collection("counts").limit(1).onSnapshot((function(t){e(t)}))}}},Ut=[],qt=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)([]),d=Object(r.a)(s,2),m=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(r.a)(g,2),h=E[0],b=E[1],v=Object(n.useState)(!1),p=Object(r.a)(v,2),y=p[0],O=p[1];return Object(n.useEffect)((function(){O(!0),zt.employee.get((function(e){Ut=[];var t=[];e.docs.forEach((function(e){Ut.push(e);var a=e.data();a.id=e.id,t.push(a)})),f(t),O(!1)}),(function(){O(!1)}))}),[]),{openEmployeeModal:function(){c(!0)},closeEmployeeModal:function(e){c(!1),e&&u(!0)},modalOpen:a,showSuccessMessage:i,hideSuccessMessage:function(){u(!1)},deleteEmployee:function(e){b(!0),zt.employee.delete(m[e].id,(function(){Ut.splice(e,1);var t=m.filter((function(t,a){return a!==e}));f(t),b(!1)}),(function(){b(!1)}))},addEmployee:function(e){m.push(e),m.sort((function(e,t){return(t.createdAt?t.createdAt:0)-(e.createdAt?e.createdAt:0)})),f(m)},loadMoreEmployees:function(){O(!0),zt.employee.get((function(e){var t=[];e.docs.forEach((function(e){Ut.push(e);var a=e.data();a.id=e.id,t.push(a)})),f((function(e){return e.concat(t)})),O(!1)}),(function(){O(!1)}),Ut[Ut.length-1])},deleting:h,loading:y,rows:m}},Qt=function(e,t){var a=Object(n.useState)(""),c=Object(r.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(0),u=Object(r.a)(i,2),s=u[0],d=u[1],m=Object(n.useState)(""),f=Object(r.a)(m,2),g=f[0],E=f[1],h=Object(n.useState)(""),b=Object(r.a)(h,2),v=b[0],p=b[1],y=Object(n.useState)(""),O=Object(r.a)(y,2),j=O[0],C=O[1],S=Object(n.useState)(!1),w=Object(r.a)(S,2),x=w[0],M=w[1];return{handleClick:function(){if(!x){M(!0);var a=Date.now(),n={name:o,salary:s,designation:g,cnic:v,mobile:j,createdAt:a,updatedAt:a};zt.employee.add(n,(function(a){M(!1),n.id=a,e(n),t(!0)}),(function(){M(!1)}))}},onNameChange:function(e){l(e)},onSalaryChange:function(e){d(Number(e))},onDesignationChange:function(e){E(e)},onCnicChange:function(e){p(e)},onMobileChange:function(e){C(e)},loading:x}},Yt=function(e){var t=e.open,a=e.close,n=e.onAdd,o=Qt(n,a),l=o.handleClick,r=o.onNameChange,i=o.onCnicChange,u=o.onDesignationChange,s=o.onMobileChange,d=o.onSalaryChange,m=o.loading;return c.a.createElement(T.a,{open:t},c.a.createElement(W.a,null,"Add New Employee"),c.a.createElement(v.a,{container:!0,spacing:2,style:{padding:24}},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Employee Name",onChange:function(e){r(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Salary",onChange:function(e){d(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Designation",onChange:function(e){u(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"CNIC",onChange:function(e){i(e.target.value)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(O.a,{fullWidth:!0,label:"Mobile",onChange:function(e){s(e.target.value)}})))),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(v.a,{container:!0,spacing:2,justify:"flex-end"},c.a.createElement(v.a,{item:!0},c.a.createElement(q,{variant:"text",onClick:function(){a(!1)}},"Cancel")),c.a.createElement(v.a,{item:!0},c.a.createElement(q,{onClick:l,loading:m},"Add Employee"))))))},_t=a(105),Jt=a.n(_t),Gt=a(106),Ht=a.n(Gt),$t=a(107),Kt=a.n($t),Xt=function(e){return c.a.createElement("div",null,e.rows.map((function(t,a){return c.a.createElement("div",{style:{padding:8,borderBottom:"1px solid ".concat(oe.grayscale[4])},key:a},c.a.createElement(v.a,{container:!0},c.a.createElement(v.a,{item:!0,xs:11},c.a.createElement(v.a,{item:!0,container:!0},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(ie,{color:oe.primary[0].interaction},t.name)),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(Ne.a,{fontSize:"small"})),c.a.createElement(v.a,{item:!0,xs:11},t.mobile),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(Jt.a,{fontSize:"small"})),c.a.createElement(v.a,{item:!0,xs:11},t.salary),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(Ht.a,{fontSize:"small"})),c.a.createElement(v.a,{item:!0,xs:11},t.cnic),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(Kt.a,{fontSize:"small"})),c.a.createElement(v.a,{item:!0,xs:11},t.designation))),c.a.createElement(v.a,{item:!0,xs:1},c.a.createElement(ae.a,{"aria-label":"edit"},c.a.createElement(te.a,{fontSize:"small"})),c.a.createElement(ae.a,{"aria-label":"delete",onClick:function(){e.onRowDelete(a)},disabled:e.deleting},c.a.createElement(Z.a,{fontSize:"small"})))))})),c.a.createElement(q,{onClick:e.onLoadMore,disabled:e.allLoaded,loading:e.loading,fullWidth:!0,variant:"text"},"Load More"))},Zt=function(){var e=qt(),t=e.openEmployeeModal,a=e.closeEmployeeModal,n=e.modalOpen,o=e.showSuccessMessage,l=e.hideSuccessMessage,r=e.deleteEmployee,i=e.loadMoreEmployees,u=e.addEmployee,s=e.deleting,d=e.loading,m=e.rows;return c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,null,c.a.createElement(Oe,{placeholder:"Search Employees",loadedRows:m.length,totalRows:0,openModal:t,label:"employees"}),c.a.createElement(ye,null,c.a.createElement(Xt,{rows:m,onRowDelete:r,deleting:s,onLoadMore:i,allLoaded:0===m.length,loading:d}))),c.a.createElement(K,{severity:"success",open:o,onClose:l,message:"Employee added successfully"}),c.a.createElement(Yt,{open:n,close:a,"aria-labelledby":"employee_modal",onAdd:u}))},ea=function(){var e=[{path:"/",component:c.a.createElement(Ce,null)},{path:"/products",component:c.a.createElement(Ce,null)},{path:"/purchases",component:c.a.createElement(ut,null)},{path:"/payments/vendors",component:c.a.createElement(Lt,null)},{path:"/payments/customers",component:c.a.createElement(Bt,null)},{path:"/invoices",component:c.a.createElement(St,null)},{path:"/customers",component:c.a.createElement(De,null)},{path:"/vendors",component:c.a.createElement(_e,null)},{path:"/accounts",component:c.a.createElement(at,null)},{path:"/cities",component:c.a.createElement(We,null)},{path:"/employees",component:c.a.createElement(Zt,null)},{path:"*",component:c.a.createElement(y.a,{variant:"h3"},"Some Page")}];return c.a.createElement(P.c,null,e.map((function(e,t){return c.a.createElement(P.a,{exact:!0,path:e.path,key:t},e.component)})))},ta=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(r.a)(o,2),i=l[0],u=l[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){b.city.list((function(e){u(e.data)}),(function(){}))};return{toggleDrawer:function(){c((function(e){return!e}))},showNav:a,cities:i}},aa=a(205),na=a(206),ca=a(108),oa=a.n(ca),la=function(){return c.a.createElement(j.a,{variant:"outlined",color:"inherit",onClick:function(){b.user.logout((function(){window.location.reload()}),(function(e){window.location.reload()})),localStorage.removeItem("token")}},"Logout")},ra=Object(S.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),ia=Object(P.g)((function(e){var t=e.history,a=Object(w.a)(e,["history"]),n=ra();return c.a.createElement("div",{className:n.root},c.a.createElement(aa.a,{position:"static"},c.a.createElement(na.a,null,c.a.createElement(ae.a,{edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu",onClick:function(){a.toggleNavigation()}},c.a.createElement(oa.a,null)),c.a.createElement(y.a,{variant:"body1",className:n.title},function(){var e=t.location.pathname.substring(1);return(e=e.toUpperCase().replace("/"," ")).length>0?e:"PRODUCTS"}()),c.a.createElement(la,null))))})),ua=Object(S.a)({welcome:{backgroundColor:oe.grayscale[0]}}),sa=function(){var e=ua(),t=ta(),a=t.toggleDrawer,n=t.showNav;t.cities;return c.a.createElement(Pe,null,c.a.createElement(F.a,{basename:"/bilalshop"},c.a.createElement(ia,{toggleNavigation:a}),c.a.createElement(v.a,{container:!0,className:e.welcome},c.a.createElement(v.a,{item:!0,lg:2,md:3},c.a.createElement(D,{showNav:n,toggleNavigation:a})),c.a.createElement(v.a,{item:!0,lg:10,md:9,sm:12,xs:12},c.a.createElement(ea,null)))))};var da=function(){var e=Object(n.useState)(!0),t=Object(r.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),i=Object(r.a)(l,2),u=i[0],s=i[1];return Object(n.useEffect)((function(){b.authenticate((function(e){o(!1),e.success&&(m.user=e.user,s(!0))}),(function(e){o(!1),s(!1)}))}),[]),c.a.createElement(c.a.Fragment,null,a?c.a.createElement("h1",null,"Loading"):u?c.a.createElement(sa,null):c.a.createElement(C,null))};var ma=function(){return c.a.createElement(da,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fa=a(207);Wt.a.initializeApp({apiKey:"AIzaSyAN6y59cHMfZiXomgcBbIVh5p1m0yLQshI",projectId:"bilalshop-b7685"}),l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(fa.a,{theme:le},c.a.createElement(ma,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.9dbf5ac6.chunk.js.map